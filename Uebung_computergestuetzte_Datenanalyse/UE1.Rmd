---
title: "R - Übung zur computergestützten Datenanalyse"
output: 
  learnr::tutorial:
          progressive: true
          allow_skip: true

runtime: shiny_prerendered
---

```{r setup, include=FALSE}

library(learnr)
library(psych)
library(shiny)
library(faux)
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE)

```

## Einführung

Herzlichen Willkommen!

Diese interaktive Plattform wurde speziell für den Kurs **R - Übung zur computergestützten Datenanalyse** entwickelt, um Ihnen eine praktische und anschauliche Lernumgebung zu bieten. Mit dieser Oberfläche haben Sie die Möglichkeit, die im Seminar erworbenen Fähigkeiten unmittelbar anzuwenden und zu vertiefen.

Auf dieser Plattform finden Sie eine Vielzahl von Beispielen und Übungen, die darauf ausgelegt sind, Ihr Verständnis von R zu verbessern. Jede Übung ist darauf ausgerichtet, spezifische Konzepte und Techniken zu vermitteln, sodass Sie Ihr Wissen erweitern und festigen können.

**Die learnR Oberfläche wird kontinuierlich erweitert, um Ihnen immer neue Lerninhalte anbieten zu können. Zudem bieten wir Ihnen die Möglichkeit, Ihren Namen in einem Google-Doc zu vermerken. Dadurch wird festgehalten, wer die Übungen zu welchen Themengebieten erfolgreich abgeschlossen hat."**

Beginnen Sie nun, indem Sie eine der verfügbaren Übungen auswählen. Die interaktive Oberfläche ermöglicht es Ihnen, sofort Feedback zu Ihren Lösungen zu erhalten und bei Bedarf Änderungen vorzunehmen. Nutzen Sie diese Gelegenheit, um in Ihrem eigenen Tempo zu üben und zu lernen.

Viel Erfolg und Spaß beim Entdecken der Möglichkeiten mit R! 

Stephan Goerigk und Team


## Grundlegende Arithmetik in R

Willkommen im Abschnitt **Grundlegende Arithmetik in R**! 

In diesem Tel der learnR Oberfläche haben Sie die Möglichkeit, grundlegende arithmetische Operationen wie Addition, Subtraktion, Multiplikation und Division in R praktisch anzuwenden. 


1. Berechnen Sie das Ergebnis der Subtraktion $534 + 16$:

```{r Addition, exercise=TRUE}

```


2. Berechnen Sie das Ergebnis der Subtraktion $7 - 3$:

```{r Subtraktion, exercise=TRUE}

```


3. Berechnen Sie das Ergebnis der Multiplikation $3 \cdot 9$:

```{r Multiplikation, exercise=TRUE}

```


4. Berechnen Sie das Ergebnis der Division 9 $\div$ 3:

```{r Division, exercise=TRUE}

```


4. Berechnen Sie das Ergebnis der Potenz $3^3$:

Anmerkung: Falls Sie beim Schreiben eines der Befehle Hilfe benötigen, können Sie auf `Hint` klicken.

```{r Quadrieren, exercise=TRUE}

```

```{r Quadrieren-hint}

3^3

```


4. Berechnen Sie das Ergebnis der Wurzel aus 9:

```{r Wurzel, exercise=TRUE}

```

```{r Wurzel-hint}

sqrt(9)

```


5. Berechnen Sie das Ergebnis des Ausdrucks $\sqrt{9} \cdot (2+6)$

```{r Arith, exercise=TRUE}

```

```{r Arith-hint}

sqrt(9) * (2+6)

```


## Datenformate in R

Willkommen im Abschnitt **Datenformate in R**! 

In diesem Bereich erkunden Sie die grundlegenden Datenstrukturen, die in der Programmiersprache R verwendet werden: **Skalare, Vektoren, Matrizen und Data Frames.** Jede dieser Strukturen spielt eine wichtige Rolle in der Datenverarbeitung und -analyse.


1. Weisen Sie den Wert 100 dem Skalar `a` zu:

```{r Skalar1, exercise=TRUE}

```

```{r Skalar1-hint}

a = 100

```

 
2. Weisen Sie dem Skalar `b` das Ergebnis der Rechnung $3 \div 100$ zu und lassen Sie sich diesen ausgeben. Führen Sie die Zuweisung mit einem Befehl (ohne Zwischenergebnisse) durch.

```{r Skalar2, exercise=TRUE}

```

```{r Skalar2-hint}

b = 3 / 100
b

```


3. Weisen Sie dem Skalar `c` den Wert $50$, dem Skalar `d` den Wert $3$ und dem Skalar `e` das Ergebnis der Rechenoperation $(c + d) \div d$ zu. Lassen Sie sich das Ergebnis zudem ausgeben.

```{r Skalar3, exercise=TRUE, exercise.lines = 5}

```

```{r Skalar3-hint}

c = 50
d = 3
e = (c+d) / d
e

```


4. Weisen Sie dem Skalar `f` das Ergebnis der Rechnoperation $5 + 4$, dem Skalar `g` den Wert $10$ zu und überprüfen Sie unter Verwendung der beiden Skala, ob diese gleich sind.

```{r Skalar4, exercise=TRUE, exercise.lines = 5}

```

```{r Skalar4-hint}

f = 5+4
g = 10
f == g

```


5. Erstellen Sie den Skalar `a`, der das Wort `Charlotte Fresenius` und den Skalar `b`, der das Wort `Carl Remigius Fresenius` beinhaltet. Lassen Sie sich lediglich den Inhalt des Skalars `b` ausgeben. 

```{r Skalar5, exercise=TRUE}

```

```{r Skalar5-hint}

a = "Charlotte Fresenius"
b = "Carl Remigius Fresenius"
b

```


6. Speichern Sie die drei Grundfarben "blau", "gelb" und "rot" in einem Vektor mit dem Namen *Farben* und lassen sich diesen ausgeben.

Wählen Sie aus dem Vektor anschließend die Farbe Blau aus und speichern Sie diese als Objekt mit dem Namen *Wasser*. Lassen Sie sich diesen zudem ausgeben:

```{r Vektor1, exercise=TRUE}

```

```{r Vektor1-hint}

Farben = c("blau", "gelb", "rot")
Farben

Wasser = Farben[1]
Wasser

```


7. Erstellen Sie den Character-Vektor *Freunde* mit den Namen *Florian*, *Eva* und *Philipp* und lassen sich diesen ausgeben. 

Fügen Sie anschließend den Namen "Tanja" hinzu und überprüfen Sie Ihre Ergänzung.

```{r Vektor2, exercise=TRUE}

```

```{r Vektor2-hint}

Freunde <- c("Florian", "Eva", "Philipp")
Freunde

Freunde <- c(Freunde, "Tanja")
Freunde

```

Wie Sie sich vermutlich vorstellen können, behandelt R numerische und *character* Skalare unterschiedlich. Zum Beispiel lassen sich mit numerischen Skalaren grundlegende arithmetische Operationen durchführen (Addition, Subtraktion, Multiplikation…) – das funktioniert mit character Skalaren nicht. Um das auszuprobieren gehen Sie einfach zurück in Ihr letztes Eingabefeld und versuchen die Rechenoperation $a + b$ auszuführen. `R` wird Ihnen hier die Fehlermeldung <span style="color:red">*non-numeric argument to binary operator*</span> ausgeben. 

### Vektor

Machen wir weiter mit `Vektoren`. Ein Vektor Objekt ist einfach eine Kombination mehrerer Skalare in einem einzelnen Objekt (z.B. eine Zahlen- oder Wortreihe). Zum Beispiel könnten die Zahlen von 1-10 in einen Vektor mit der Länge 10 kombiniert werden. Oder die Buchstaben des Alphabets könnten in einen Vektor mit der Länge 26 gespeichert werden. Genau wie Skalare, können Vektoren numerisch oder characters sein (Aber nicht beides auf einmal!)

Die einfachste Art einen Vektor zu erstellen ist mit der `c()` Funktion. Das c steht für *“concatenate”*, was auf Englisch so viel heißt wie “zusammenbringen”. Die `c()` Funktion nimmt mehrere Skalare als Input und erstellt einen Vektor, der diese Objekte enthält.

Wenn man `c()` benutzt, muss man immer ein **Komma** zwischen die Objekte setzen (Skalare oder Vektoren), die man kombinieren möchte.

##### Aufgabe 
Lassen Sie uns die `c()` Funktion nutzen um einen **numerischen Vektor** zu erstellen der `a` heißt und die Zahlen von 1 bis 7 enthält. Lassen Sie sich das Ergebnis direkt ausgeben:

```{r Vektor111, exercise=TRUE}

```

```{r Vektor111-hint}
a = c(1, 2, 3, 4, 5, 6, 7)
a
```

Sie können auch **character Vektoren** erstellen, indem Sie die `c()` Funktion auf einzelne character Skalare anwenden. 

##### Aufgabe 
Erstellen Sie einen Vektor, der die folgende Namen beinhaltet: `Freud`, `Wundt`, `Bandura`, `Watson`, `Jung`. Wir nennen diesen Vektor zur besseren Übersicht einmal `char.vec`. Lassen Sie sich den Inhalt des Vektors direkt ausgeben. 

```{r Vektor222, exercise=TRUE}

```

```{r Vektor222-hint}
char.vec = c("Freud", "Wundt", "Bandura", "Watson", "Jung")
char.vec
```

Mit Vektoren lassen sich auch Rechenoperationen ausführen. 

##### Aufgabe 
Erstellen Sie den Vektor `a` mit den Zahlen von 1 - 3 und den Vektor `b` mit den Zahlen von 4 - 6 und addieren diese zu einem neuen Vektor `c`. Lassen Sie sich den neuen Vektor `c` direkt anzeigen. Bei dieser Art der Addition wird jeweils die $n$te Zahl des Vektors `a` mit der $n$ten Zahl des Vektors `b` addiert. 

```{r Vektor333, exercise=TRUE}

```

```{r Vektor333-hint}
a = c(1, 2, 3)
b = c(4, 5, 6)
c = a + b 
c
```

Vektoren lassen sich über die `c()` Funktion auch aneinanderhängen. Anders als bei den Rechenoperationen funktioniert dies auch mit character Vektoren. 

##### Aufgabe 
Erstellen Sie die Vektoren `a` mit den Farben `blau` und `rot` sowie den Vektor `b` mit den Farben `gelb`und `grün`. Hängen Sie diese beiden Vektoren zu einem neuen Vektor `c` zusammen und lassen sich diesen anzeigen. 

```{r Vektor444, exercise=TRUE}

```

```{r Vektor444-hint}
a = c("blau", "rot")
b = c("gelb", "grün")
c = c(a, b) 
c
```


### Faktor Variablen

Wir haben bereits gelernt, wie man einen Vektor aus character Objekten erstellt. Manchmal brauchen wir in R jedoch Variablen, die nicht nur Worte enthalten, sondern dem Programm mitteilen, dass es sich um feste Gruppen oder **Kategorien** handelt. Es geht also nicht nur um eine "Sammlung" von Worten (z.B. Nachnamen von Probanden), sondern um festgelegte Analyseeinheiten. Solche Variablen heißen in R `factor`. 

In einer factor Variable ist jeder Kategorie eine Zahl zugeordnet (z.B. 1 = männlich, 2 = weiblich).

Um Faktor Variablen zu erstellen, machen wie einen Vorgang, den man **Kodieren** nennt und das geht so:

Wir haben einen Vektor mit Codes 1 und 2 für männlich und weiblich vorliegen:

```{r echo=TRUE}
geschlecht = c(1, 2, 2, 1, 2)
# Das Ergebnis ausgeben
geschlecht
```

In dieser Form erkennt R diesen Vektor als numerische Variable. Um Sie in einen Faktor umzuwandeln, definieren wir die Zahlen (1 und 2) als `levels` des Faktors und geben dann jedem level einen Namen (`labels`):

```{r echo=TRUE}
geschlecht = factor(geschlecht, levels = c(1,2), labels = c("männlich", "weiblich"))
# Das Ergebnis ausgeben
geschlecht
```

Das Ergebnis ist eine codierte Faktorvariable. Wenn wir Sie uns ausgeben lassen erhalten wir unter den Merkmalsausprägungen eine Liste mit den einzelnen Kategorien (levels) des Faktors.

R wird uns für Faktoren alle Ergebnisse nach der **Reihenfolge** der levels anzeigen. Wenn wir keine Faktorvariable haben, sondern eine character Variable funktioniert die Reihenfolge immer alphabetisch.

##### Aufgabe 
Erstellen Sie nun im folgenden Eingabefeld den Vektor `Wohnort` `c(1,2,1,3,2,1)` mit den Codes $1$ für `München`, $2$ für `Hamburg` und $3$ für `Köln`. Erstellen Sie erst einen numerischen Vektor und lassen diesen dann in einen Faktor umwandeln und anzeigen. 

*Hinweis: Da `R` in dieser Übung keine Information zwischen den einzelnen Eingabefeldern überträgt, müssen Sie die beiden Schritte, die Ihnen in zwei unterschiedlichen Eingabefeldern gezeigt wurden, nun in einem kombinieren* 

```{r Faktor, exercise=TRUE}

```

```{r Faktor-hint}
Wohnort = c(1,2,1,3,2,1)
Wohnort = factor(Wohnort, levels = c(1,2,3), labels = c("München", "Hamburg", "Köln"))
Wohnort
```

*An dieser Stelle ein weiterer Hinweis: `R` ist "case sensitive". Das bedeutet, dass Groß- und Kleinschreibung relevant ist. Wenn Sie also beispielsweise den Vektor `Wohnort`erstellen, wird `R` diesen nicht wiederfinden, wenn Sie `wohnort` eingeben.*

### Vektor Indizierung

Manchmal möchten wir wieder einen einzelnen Skalar auswählen, der als Teil von einem Vektor gespeichert ist. Diese **Auswahl** eines Einzelelements nennt man **Indizierung**. Die Auswahl eines kleineren Objekts aus einem größeren Objekt funktioniert in `R` immer mit `[]`. 

Benötigen wir aus einem Vektor z.B. genau den 3. Skalar, schreiben wir einfach eine 3 in eckige Klammern hinter den Vektor.

##### Aufgabe 
Erstellen Sie nun den Vektor `color`, der die folgenden Farben enthält: `blau`, `rot`, `grün`, `gelb`. Lassen Sie sich lediglich die zweite Farbe ausgeben (In unserem Fall sollte in dem Ausgabefeld also "rot" erscheinen)

```{r Indizierung1, exercise=TRUE}

```

```{r Indizierung1-hint}
color = c("blau", "rot", "grün", "gelb")
color[2]
```

### Erstellen von Datenmatrizen

In der Psychologie beobachten wir für unsere Studien fast immer mehr als eine Variable. Wir könnten diese alle in einzelnen Vektoren speichern und uns die Objektnamen merken. Z.B.:

```{r echo=TRUE}
Name = c("Max", "Maja", "Mia", "Moritz", "Markus")
Alter = c(20, 31, 25, 34, 51)
Diagnose = c("Depression", "Zwangsstörung", "Depression", "Soziale Phobie", "Depression")
```

Praktischer ist es, die einzelnen Vektoren in Tabellenform zu speichern, der **Datenmatrix**. In R heißen Datenmatrizen `data.frame`. Wir können die Vektoren folgendermaßen zu einem data.frame kombinieren:

```{r echo=TRUE}
df = data.frame(Name, Alter, Diagnose)
# Das Ergebnis ausgeben
df
```

Dies wollen wir direkt einmal üben: 

##### Aufgabe 
Erstellen Sie eine Datenmatrix mit dem Namen `Personen` mit folgenden Informationen: <br>
*(Wir betrachten die Variablen `Name`, `Alter`, `Wohnort`)*

`Peter, 41, Mainz` <br>
`Susanne, 23, Regenburg` <br>
`Hannes, 31, München` <br>
`Jana, 43, Köln`

Lassen Sie sich die Datenmatrix direkt ausgeben. 

```{r df1, exercise=TRUE, exercise.lines = 5}

```

```{r df1-hint}
Name = c("Peter", "Susanne", "Hannes", "Jana")
Alter = c(41, 23, 31, 43)
Wohnort = c("Mainz", "Regensburg", "München", "Köln")
Personen = data.frame(Name, Alter, Wohnort)
Personen
```

Wie in jeder Datenmatrix entsprechen die **Zeilen** den einzelnen Personen (Fällen) und die **Spalten** den Variablen. 

`R` bezeichnet Zeilen und Spalten als **rows** und **columns**. Wollen wir z.B. wissen, wie viele Zeilen der data.frame hat, können wir `nrow()` benutzen. Für die Anzahl der Spalten nehmen wir `ncol()`:

Probieren Sie dies einmal in Ihrem gerade erstellten Datensatz aus. Fügen Sie am Ende Ihres Codes einfach entweder `nrow(Personen)` oder `ncol(Personen)` ein.

Wenn wir die einzelnen Vektoren nicht bereits vorher definiert haben, können wir auch alles in einem Schritt machen. Das Ergebnis ist das gleiche:

```{r echo=TRUE}
df = data.frame("Name" = c("Max", "Maja", "Mia", "Moritz", "Markus"),
                "Alter" = c(20, 31, 25, 34, 51),
                "Diagnose" = c("Depression", "Zwangsstörung", "Depression", "Soziale Phobie", "Depression")
                )
# Das Ergebnis ausgeben
df
```

Wollen wir wieder eine einzelne Variable aus dem Datensatz benutzen, können wir diese über das `$` Zeichen anwählen:

```{r echo=TRUE}
df$Alter
```

### Indizierung

Wollen wir aus dem data.frame wieder einzelne Elemente verwenden, nutzen wir wieder die Indizierung. Auch hier brauchen wir die `[]`. Da wir im data.frame Zeilen und Spalten haben, brauchen wir eine Möglichkeit, beides auszuwählen, wie ein Curser der von links nach rechts, bzw. von oben nach unten läuft. 

Wir trennen dafür unsere `[]` mit einem Komma `[,]`. Alles, was **links vom Komma** steht, bezieht sich auf Zeilen alles **rechts vom Komma** bezieht sich auf Spalten.

##### Aufgabe 
Um dies zu Üben erstellen Sie wieder eine Datenmatrix mit dem Namen `Personen` mit folgenden Informationen: <br>
*(Wir betrachten die Variablen `Name`, `Alter`, `Wohnort`)*

`Peter, 41, Mainz` <br>
`Susanne, 23, Regenburg` <br>
`Hannes, 31, München` <br>
`Jana, 43, Köln`

Lassen Sie sich im Ausgabefeld nun lediglich den Wohnort von Susanne anzeigen. 

*Hinweis: Sie können den Code Ihres Datensatzes aus dem letzten Eingabefeld kopieren, um nicht alles neu schreiben zu müssen*

```{r Indizierung_df, exercise=TRUE, exercise.lines = 5}

```

```{r Indizierung_df-hint}
Name = c("Peter", "Susanne", "Hannes", "Jana")
Alter = c(41, 23, 31, 43)
Wohnort = c("Mainz", "Regensburg", "München", "Köln")
Personen = data.frame(Name, Alter, Wohnort)
Personen[2,3]
```

**Nun haben Sie bereits einige der wichtigsten Grundfunktionen von `R` kennengelernt und wir können dazu übergehen, vorlesungsbegleitende Übungsaufgaben zu erarbeiten.**


